from nornir import InitNornir
from nornir_utils.plugins.functions import print_result
from nornir_napalm.plugins.tasks import napalm_get, napalm_configure, napalm_cli
from nornir.core.filter import F

def multiple_tasks(task):
    task.run(task=napalm_cli, commands=["show ip ospf neighbor"])
    #task.run(task=napalm_configure, configuration="interface loopback 1000")
    task.run(task=napalm_get, getters=["interfaces"])

nr = InitNornir(config_file="config.yml")
i = nr.filter(F(groups__contains="iosv"))
output = i.run(task=multiple_tasks)
print_result(output)
